<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="mbn_sms_duanxinrili" >
  <resultMap id="abatorgenerated_MbnSmsDuanxinriliResult" class="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="merchant_pin" property="merchantPin" jdbcType="BIGINT" />
    <result column="title" property="title" jdbcType="VARCHAR" />
    <result column="content" property="content" jdbcType="VARCHAR" />
    <result column="remindWay" property="remindway" jdbcType="INTEGER" />
    <result column="cycleType" property="cycletype" jdbcType="INTEGER" />
    <result column="number" property="number" jdbcType="INTEGER" />
    <result column="remindHour" property="remindhour" jdbcType="INTEGER" />
    <result column="remindMinutes" property="remindminutes" jdbcType="INTEGER" />
    <result column="type" property="type" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="create_by" property="createBy" jdbcType="BIGINT" />
    <result column="remindTime" property="remindtime" jdbcType="TIMESTAMP" />
  </resultMap>
  <resultMap id="abatorgenerated_MbnSmsDuanxinriliResultWithBLOBs" class="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" extends="mbn_sms_duanxinrili.abatorgenerated_MbnSmsDuanxinriliResult" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    <result column="tos" property="tos" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_MbnSmsDuanxinriliResultWithBLOBs" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    select id, merchant_pin, title, content, remindWay, cycleType, number, remindHour,
      remindMinutes, type, create_time, create_by, remindTime, tos
    from mbn_sms_duanxinrili
    where id = #id:BIGINT#
  </select>
  <select id="selectCountCalendarListByPage" resultClass="java.lang.Integer" parameterClass="java.util.Map">
select count(*) 
    from mbn_sms_duanxinrili as rili RIGHT join (SELECT *, 
 COUNT(DISTINCT batch_id) FROM mbn_sms_ready_send WHERE operation_id=3 GROUP BY batch_id)  AS smsReadySend ON smsReadySend.batch_id=rili.id 
    <dynamic prepend="where">
    		<isNotNull prepend="and" property="createBy">
				rili.create_by = #createBy#
			</isNotNull>
			<isNotNull prepend="and" property="type">
				smsReadySend.send_result = #type#
			</isNotNull>
			<isNotNull prepend="and" property="sendResult">
				smsReadySend.send_result != #sendResult#
			</isNotNull>
			<isNotNull prepend="and" property="title">
				rili.title like
				 CONCAT('%',#title:VARCHAR#,'%')
			</isNotNull>
			<isNotNull prepend="and" property="remindWay">
				rili.remindWay = #remindWay#
			</isNotNull>
			<isNotNull prepend="and" property="startDate">
				<![CDATA[rili.remindTime>=#startDate:DATETIME#]]>
			</isNotNull>
			<isNotNull prepend="and" property="endDate">
				<![CDATA[rili.remindTime<=#endDate:DATETIME#]]>
			</isNotNull>
			 	ORDER BY create_time DESC
    </dynamic>
  </select>
  <select id="selectCalendarListByPage" resultMap="abatorgenerated_MbnSmsDuanxinriliResult" parameterClass="java.util.Map">
   select rili.id, rili.merchant_pin, rili.title, rili.content, rili.remindWay, rili.cycleType, rili.number, rili.remindHour,
      rili.remindMinutes, smsReadySend.send_result AS type, rili.create_time, rili.create_by, rili.remindTime, rili.tos
    from mbn_sms_duanxinrili as rili RIGHT join (SELECT *, 
 COUNT(DISTINCT batch_id) FROM mbn_sms_ready_send WHERE operation_id=3 GROUP BY batch_id)  AS smsReadySend ON smsReadySend.batch_id=rili.id 
    <dynamic prepend="where">
    		<isNotNull prepend="and" property="createBy">
				rili.create_by = #createBy#
			</isNotNull>
			<isNotNull prepend="and" property="type">
				smsReadySend.send_result = #type#
			</isNotNull>
			<isNotNull prepend="and" property="sendResult">
				smsReadySend.send_result != #sendResult#
			</isNotNull>
			<isNotNull prepend="and" property="title">
				rili.title like
				 CONCAT('%',#title:VARCHAR#,'%')
			</isNotNull>
			<isNotNull prepend="and" property="remindWay">
				rili.remindWay = #remindWay#
			</isNotNull>
			<isNotNull prepend="and" property="startDate">
				<![CDATA[rili.remindTime>=#startDate:DATETIME#]]>
			</isNotNull>
			<isNotNull prepend="and" property="endDate">
				<![CDATA[rili.remindTime<=#endDate:DATETIME#]]>
			</isNotNull>
			 	ORDER BY create_time DESC
    </dynamic>
    <dynamic prepend="limit">
            <isNotNull property="startPage" >
                $startPage$,
            </isNotNull>
            <isNotNull property="pageSize" >
                $pageSize$
            </isNotNull>
   </dynamic>
   </select>
     <select id="selectHadSendCountCalendarListByPage" resultClass="java.lang.Integer" parameterClass="java.util.Map">
   SELECT count(*) 
    FROM mbn_sms_duanxinrili AS rili RIGHT JOIN (SELECT *, 
 COUNT(DISTINCT batch_id) FROM mbn_sms_had_send WHERE operation_id=3 GROUP BY batch_id)  AS smsHadSend ON smsHadSend.batch_id=rili.id  
    <dynamic prepend="where">
    		<isNotNull prepend="and" property="createBy">
				rili.create_by = #createBy#
			</isNotNull>
			<isNotNull prepend="and" property="type">
				smsHadSend.send_result = #type#
			</isNotNull>
			<isNotNull prepend="and" property="sendResult">
				smsHadSend.send_result != #sendResult#
			</isNotNull>
			<isNotNull prepend="and" property="title">
				rili.title like
				 CONCAT('%',#title:VARCHAR#,'%')
			</isNotNull>
			<isNotNull prepend="and" property="remindWay">
				rili.remindWay = #remindWay#
			</isNotNull>
			<isNotNull prepend="and" property="startDate">
				<![CDATA[rili.remindTime>=#startDate:DATETIME#]]>
			</isNotNull>
			<isNotNull prepend="and" property="endDate">
				<![CDATA[rili.remindTime<=#endDate:DATETIME#]]>
			</isNotNull>
			 	ORDER BY create_time DESC
    </dynamic>
  </select>
  <select id="selectHadSendCalendarListByPage" resultMap="abatorgenerated_MbnSmsDuanxinriliResult" parameterClass="java.util.Map">
   SELECT rili.id, rili.merchant_pin, rili.title, rili.content, rili.remindWay, rili.cycleType, rili.number, rili.remindHour,
      rili.remindMinutes, smsHadSend.send_result AS TYPE, rili.create_time, rili.create_by, rili.remindTime, rili.tos
    FROM mbn_sms_duanxinrili AS rili RIGHT JOIN (SELECT *, 
 COUNT(DISTINCT batch_id) FROM mbn_sms_had_send WHERE operation_id=3 GROUP BY batch_id)  AS smsHadSend ON smsHadSend.batch_id=rili.id  
    <dynamic prepend="where">
    		<isNotNull prepend="and" property="createBy">
				rili.create_by = #createBy#
			</isNotNull>
			<isNotNull prepend="and" property="type">
				smsHadSend.send_result = #type#
			</isNotNull>
			<isNotNull prepend="and" property="sendResult">
				smsHadSend.send_result != #sendResult#
			</isNotNull>
			<isNotNull prepend="and" property="title">
				rili.title like
				 CONCAT('%',#title:VARCHAR#,'%')
			</isNotNull>
			<isNotNull prepend="and" property="remindWay">
				rili.remindWay = #remindWay#
			</isNotNull>
			<isNotNull prepend="and" property="startDate">
				<![CDATA[rili.remindTime>=#startDate:DATETIME#]]>
			</isNotNull>
			<isNotNull prepend="and" property="endDate">
				<![CDATA[rili.remindTime<=#endDate:DATETIME#]]>
			</isNotNull>
			 	ORDER BY create_time DESC
    </dynamic>
    <dynamic prepend="limit">
            <isNotNull property="startPage" >
                $startPage$,
            </isNotNull>
            <isNotNull property="pageSize" >
                $pageSize$
            </isNotNull>
   </dynamic>
   
  </select>
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_MbnSmsDuanxinriliResult" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinriliExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    select id, merchant_pin, title, content, remindWay, cycleType, number, remindHour,
      remindMinutes, type, create_time, create_by, remindTime
    from mbn_sms_duanxinrili
    <isParameterPresent >
      <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="abatorgenerated_selectByExampleWithBLOBs" resultMap="abatorgenerated_MbnSmsDuanxinriliResultWithBLOBs" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinriliExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    select id, merchant_pin, title, content, remindWay, cycleType, number, remindHour,
      remindMinutes, type, create_time, create_by, remindTime, tos
    from mbn_sms_duanxinrili
    <isParameterPresent >
      <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    delete from mbn_sms_duanxinrili
    where id = #id:BIGINT#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinriliExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    delete from mbn_sms_duanxinrili
    <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    insert into mbn_sms_duanxinrili (id, merchant_pin, title, content, remindWay, cycleType, number,
      remindHour, remindMinutes, type, create_time, create_by, remindTime, tos)
    values (#id:BIGINT#, #merchantPin:BIGINT#, #title:VARCHAR#, #content:VARCHAR#,
      #remindway:INTEGER#, #cycletype:INTEGER#, #number:INTEGER#, #remindhour:INTEGER#,
      #remindminutes:INTEGER#, #type:INTEGER#, #createTime:TIMESTAMP#, #createBy:BIGINT#,
      #remindtime:TIMESTAMP#, #tos:LONGVARCHAR#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKeyWithBLOBs" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    set merchant_pin = #merchantPin:BIGINT#,
      title = #title:VARCHAR#,
      content = #content:VARCHAR#,
      remindWay = #remindway:INTEGER#,
      cycleType = #cycletype:INTEGER#,
      number = #number:INTEGER#,
      remindHour = #remindhour:INTEGER#,
      remindMinutes = #remindminutes:INTEGER#,
      type = #type:INTEGER#,
      create_time = #createTime:TIMESTAMP#,
      create_by = #createBy:BIGINT#,
      remindTime = #remindtime:TIMESTAMP#,
      tos = #tos:LONGVARCHAR#
    where id = #id:BIGINT#
  </update>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    set merchant_pin = #merchantPin:BIGINT#,
      title = #title:VARCHAR#,
      content = #content:VARCHAR#,
      remindWay = #remindway:INTEGER#,
      cycleType = #cycletype:INTEGER#,
      number = #number:INTEGER#,
      remindHour = #remindhour:INTEGER#,
      remindMinutes = #remindminutes:INTEGER#,
      type = #type:INTEGER#,
      create_time = #createTime:TIMESTAMP#,
      create_by = #createBy:BIGINT#,
      remindTime = #remindtime:TIMESTAMP#
    where id = #id:BIGINT#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinrili" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    <dynamic prepend="set" >
      <isNotNull prepend="," property="merchantPin" >
        merchant_pin = #merchantPin:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="title" >
        title = #title:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="content" >
        content = #content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remindway" >
        remindWay = #remindway:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="cycletype" >
        cycleType = #cycletype:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="number" >
        number = #number:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="remindhour" >
        remindHour = #remindhour:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="remindminutes" >
        remindMinutes = #remindminutes:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="type" >
        type = #type:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="createTime" >
        create_time = #createTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="createBy" >
        create_by = #createBy:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="remindtime" >
        remindTime = #remindtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="tos" >
        tos = #tos:LONGVARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:BIGINT#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.leadtone.mas.bizplug.calendar.bean.MbnSmsDuanxinriliExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    select count(*) from mbn_sms_duanxinrili
    <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.id" >
        id = #record.id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.merchantPin" >
        merchant_pin = #record.merchantPin:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.title" >
        title = #record.title:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.content" >
        content = #record.content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.remindway" >
        remindWay = #record.remindway:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.cycletype" >
        cycleType = #record.cycletype:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.number" >
        number = #record.number:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.remindhour" >
        remindHour = #record.remindhour:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.remindminutes" >
        remindMinutes = #record.remindminutes:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.type" >
        type = #record.type:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.createTime" >
        create_time = #record.createTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.createBy" >
        create_by = #record.createBy:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.remindtime" >
        remindTime = #record.remindtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.tos" >
        tos = #record.tos:LONGVARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExampleWithBLOBs" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    set id = #record.id:BIGINT#,
      merchant_pin = #record.merchantPin:BIGINT#,
      title = #record.title:VARCHAR#,
      content = #record.content:VARCHAR#,
      remindWay = #record.remindway:INTEGER#,
      cycleType = #record.cycletype:INTEGER#,
      number = #record.number:INTEGER#,
      remindHour = #record.remindhour:INTEGER#,
      remindMinutes = #record.remindminutes:INTEGER#,
      type = #record.type:INTEGER#,
      create_time = #record.createTime:TIMESTAMP#,
      create_by = #record.createBy:BIGINT#,
      remindTime = #record.remindtime:TIMESTAMP#,
      tos = #record.tos:LONGVARCHAR#
    <isParameterPresent >
      <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jan 29 18:28:52 CST 2013.
    -->
    update mbn_sms_duanxinrili
    set id = #record.id:BIGINT#,
      merchant_pin = #record.merchantPin:BIGINT#,
      title = #record.title:VARCHAR#,
      content = #record.content:VARCHAR#,
      remindWay = #record.remindway:INTEGER#,
      cycleType = #record.cycletype:INTEGER#,
      number = #record.number:INTEGER#,
      remindHour = #record.remindhour:INTEGER#,
      remindMinutes = #record.remindminutes:INTEGER#,
      type = #record.type:INTEGER#,
      create_time = #record.createTime:TIMESTAMP#,
      create_by = #record.createBy:BIGINT#,
      remindTime = #record.remindtime:TIMESTAMP#
    <isParameterPresent >
      <include refid="mbn_sms_duanxinrili.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
</sqlMap>